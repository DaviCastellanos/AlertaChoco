(function(e){function t(t){for(var n,o,s=t[0],c=t[1],u=t[2],p=0,f=[];p<s.length;p++)o=s[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);l&&l(t);while(f.length)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,s=1;s<r.length;s++){var c=r[s];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"0b72":function(e,t,r){"use strict";var n=r("d001"),a=r.n(n);a.a},"22d4":function(e,t,r){"use strict";var n=r("26be"),a=r.n(n);a.a},"26be":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("div",{attrs:{id:"segment"}},[r("web-map")],1),r("div",{attrs:{id:"segment"}},[r("alerts-list")],1)])},i=[],o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div")},s=[],c=r("3835"),u=r("afaa"),l=r("2f62"),p={name:"web-map",computed:Object(l["b"])(["mapCenter"]),watch:{mapCenter:function(e){this.gotTo(e)}},methods:{gotTo:function(e){var t={duration:1e3};this.view.goTo({target:e,zoom:10},t)},drawMap:function(){var e=this;Object(u["loadModules"])(["esri/Map","esri/views/MapView","esri/layers/FeatureLayer"],{css:!0}).then((function(t){var r=Object(c["a"])(t,3),n=r[0],a=r[1],i=r[2],o=new n({basemap:"dark-gray-vector"});e.view=new a({container:e.$el,map:o,center:[-76.781506677246,5.994406584410996],zoom:6});var s={type:"simple",symbol:{type:"picture-marker",url:"https://image.flaticon.com/icons/png/512/1001/1001022.png",width:"18px",height:"18px"}},u={symbol:{type:"text",color:"#FFFFF",haloColor:"#ff0000",haloSize:"0px",font:{size:"12px",family:"Noto Sans",style:"italic",weight:"normal"}},labelPlacement:"below-center",labelExpressionInfo:{expression:"$feature.municipio"}},l={type:"simple",symbol:{type:"picture-marker",url:"https://image.flaticon.com/icons/svg/599/599506.svg",width:"25px",height:"25px"}},p={title:"{threat}",content:"<b>Ubicaci√≥n:</b> {location}<br><b>Nivel de Riesgo:</b> {level}<br><b>Fecha:</b> {date}"},f=new i({url:"https://services7.arcgis.com/AGOpm0AOkNTcqxqa/arcgis/rest/services/municipios_subregion_choco/FeatureServer/0",renderer:s,labelingInfo:u});o.add(f);var d=new i({url:"https://services7.arcgis.com/AGOpm0AOkNTcqxqa/arcgis/rest/services/alertas_subregion_choco_ejemplo/FeatureServer/0",renderer:l,outFields:["threat","location","level","date","OBJECTID"],popupTemplate:p});o.add(d)}))}},mounted:function(){this.drawMap()},beforeDestroy:function(){this.view&&(this.view.container=null)}},f=p,d=(r("22d4"),r("2877")),m=Object(d["a"])(f,o,s,!1,null,"379bd664",null),h=m.exports,v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"alert"}},[r("BTable",{attrs:{striped:"",hover:"",items:e.items}})],1)},b=[],g=(r("96cf"),r("1da1")),w=r("d4ec"),y=r("bee2"),O=r("bc3a"),x=r.n(O),j=function(){function e(){Object(w["a"])(this,e)}return Object(y["a"])(e,[{key:"getRequest",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t){var r,n,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.prev=1,this._cancelPreviousRequest(t),this._trackCurrentRequest(t),e.next=6,x.a.get(t,Object.assign({},r,{cancelToken:this.cancelToken.token}));case 6:return n=e.sent,e.abrupt("return",n.data&&n.data.items?n.data.items:n.data);case 10:if(e.prev=10,e.t0=e["catch"](1),!x.a.isCancel(e.t0)){e.next=15;break}e.next=16;break;case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,this,[[1,10]])})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postRequest",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=i.length>2&&void 0!==i[2]?i[2]:{},e.prev=1,e.next=4,x.a.post(t,r,Object.assign({},n));case 4:return a=e.sent,e.abrupt("return",a.data&&a.data.items?a.data.items:a.data);case 8:e.prev=8,e.t0=e["catch"](1),console.log("ERROR "+e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));function t(t,r){return e.apply(this,arguments)}return t}()}]),e}(),_=new j,k={getAlerts:function(){return _.postRequest("https://services7.arcgis.com/AGOpm0AOkNTcqxqa/arcgis/rest/services/alertas_subregion_choco_ejemplo/FeatureServer/0/query?f=json&where=1=1&outSr=4326&outFields=OBJECTID, threat, date, location")}},T=r("5f5b"),R={components:{BTable:T["b"]},data:function(){return{items:[]}},methods:{SetItems:function(e){for(var t=0;t<e.length;t++)this.items.push({fecha:this.formatTime(e[t].attributes.date),Amenaza:e[t].attributes.threat,ver:"ver"})},formatTime:function(e){var t={hour:"2-digit",minute:"2-digit",second:"2-digit"};return new Date(e).toLocaleDateString("es-LA",t)},Request:function(){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k.getAlerts();case 2:r=t.sent,r&&e.SetItems(e.OrderByDate(r.features).reverse());case 4:case"end":return t.stop()}}),t)})))()},OrderByDate:function(e){return e.sort((function(e,t){var r=new Date(e.date),n=new Date(t.date);return r-n}))}},mounted:function(){this.Request()}},S=R,q=(r("0b72"),Object(d["a"])(S,v,b,!1,null,"3ffa94b4",null)),A=q.exports,F={name:"App",components:{WebMap:h,AlertsList:A}},C=F,M=(r("034f"),Object(d["a"])(C,a,i,!1,null,null,null)),E=M.exports;n["default"].use(l["a"]);var P=new l["a"].Store({state:{mapCenter:[]},getters:{},mutations:{CHANGE_MAP_CENTER:function(e,t){var r=t.lat,n=t.lon;this.state.mapCenter=[r,n]}},actions:{}}),D=r("a7fe"),N=r.n(D),B=r("b1e0");r("f9e3"),r("2dd8");n["default"].config.productionTip=!1,new n["default"]({store:P,render:function(e){return e(E)}}).$mount("#app"),n["default"].use(N.a,x.a),n["default"].use(T["a"]),n["default"].use(B["a"])},"85ec":function(e,t,r){},d001:function(e,t,r){}});
//# sourceMappingURL=app.826b0e8f.js.map