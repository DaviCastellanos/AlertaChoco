{"remainingRequest":"/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/node_modules/babel-loader/lib/index.js!/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/src/components/WebMap.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/src/components/WebMap.vue","mtime":1588893950671},{"path":"/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chumbimbi/Desktop/Proyectos/AlertaChoco/alerta-choco-ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9jaHVtYmltYmkvRGVza3RvcC9Qcm95ZWN0b3MvQWxlcnRhQ2hvY28vYWxlcnRhLWNob2NvLXVpL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKLy8KLy8KLy8KLy8KaW1wb3J0IHsgbG9hZE1vZHVsZXMgfSBmcm9tICdlc3JpLWxvYWRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnd2ViLW1hcCcsCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgLy8gbGF6eSBsb2FkIHRoZSByZXF1aXJlZCBBcmNHSVMgQVBJIGZvciBKYXZhU2NyaXB0IG1vZHVsZXMgYW5kIENTUwogICAgbG9hZE1vZHVsZXMoWydlc3JpL01hcCcsICdlc3JpL3ZpZXdzL01hcFZpZXcnLCAnZXNyaS9sYXllcnMvRmVhdHVyZUxheWVyJ10sIHsKICAgICAgY3NzOiB0cnVlCiAgICB9KS50aGVuKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDMpLAogICAgICAgICAgQXJjR0lTTWFwID0gX3JlZjJbMF0sCiAgICAgICAgICBNYXBWaWV3ID0gX3JlZjJbMV0sCiAgICAgICAgICBGZWF0dXJlTGF5ZXIgPSBfcmVmMlsyXTsKCiAgICAgIHZhciBtYXAgPSBuZXcgQXJjR0lTTWFwKHsKICAgICAgICBiYXNlbWFwOiAnZGFyay1ncmF5LXZlY3RvcicKICAgICAgfSk7CiAgICAgIF90aGlzLnZpZXcgPSBuZXcgTWFwVmlldyh7CiAgICAgICAgY29udGFpbmVyOiBfdGhpcy4kZWwsCiAgICAgICAgbWFwOiBtYXAsCiAgICAgICAgY2VudGVyOiBbLTc2Ljc4MTUwNjY3NzI0NiwgNS45OTQ0MDY1ODQ0MTA5OTU3XSwKICAgICAgICAvLyBsb25naXR1ZGUsIGxhdGl0dWRlCiAgICAgICAgem9vbTogNwogICAgICB9KTsKICAgICAgdmFyIG11bmljaXBpb3NSZW5kZXJlciA9IHsKICAgICAgICB0eXBlOiAic2ltcGxlIiwKICAgICAgICBzeW1ib2w6IHsKICAgICAgICAgIHR5cGU6ICJwaWN0dXJlLW1hcmtlciIsCiAgICAgICAgICB1cmw6ICJodHRwczovL2ltYWdlLmZsYXRpY29uLmNvbS9pY29ucy9wbmcvNTEyLzEwMDEvMTAwMTAyMi5wbmciLAogICAgICAgICAgd2lkdGg6ICIxOHB4IiwKICAgICAgICAgIGhlaWdodDogIjE4cHgiCiAgICAgICAgfQogICAgICB9OwogICAgICB2YXIgbXVuaWNpcGlvc0xhYmVscyA9IHsKICAgICAgICBzeW1ib2w6IHsKICAgICAgICAgIHR5cGU6ICJ0ZXh0IiwKICAgICAgICAgIGNvbG9yOiAiI0ZGRkZGIiwKICAgICAgICAgIGhhbG9Db2xvcjogIiNmZjAwMDAiLAogICAgICAgICAgaGFsb1NpemU6ICIwcHgiLAogICAgICAgICAgZm9udDogewogICAgICAgICAgICBzaXplOiAiMTJweCIsCiAgICAgICAgICAgIGZhbWlseTogIk5vdG8gU2FucyIsCiAgICAgICAgICAgIHN0eWxlOiAiaXRhbGljIiwKICAgICAgICAgICAgd2VpZ2h0OiAibm9ybWFsIgogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgbGFiZWxQbGFjZW1lbnQ6ICJiZWxvdy1jZW50ZXIiLAogICAgICAgIGxhYmVsRXhwcmVzc2lvbkluZm86IHsKICAgICAgICAgIGV4cHJlc3Npb246ICIkZmVhdHVyZS5tdW5pY2lwaW8iCiAgICAgICAgfQogICAgICB9OwogICAgICB2YXIgYWxlcnRSZW5kZXJlciA9IHsKICAgICAgICB0eXBlOiAic2ltcGxlIiwKICAgICAgICBzeW1ib2w6IHsKICAgICAgICAgIHR5cGU6ICJwaWN0dXJlLW1hcmtlciIsCiAgICAgICAgICB1cmw6ICJodHRwczovL2ltYWdlLmZsYXRpY29uLmNvbS9pY29ucy9zdmcvNTk5LzU5OTUwNi5zdmciLAogICAgICAgICAgd2lkdGg6ICIyNXB4IiwKICAgICAgICAgIGhlaWdodDogIjI1cHgiCiAgICAgICAgfQogICAgICB9OwogICAgICB2YXIgYWxlcnRQb3B1cCA9IHsKICAgICAgICAidGl0bGUiOiAie3RocmVhdH0iLAogICAgICAgICJjb250ZW50IjogIjxiPlViaWNhY2nDs246PC9iPiB7bG9jYXRpb259PGJyPjxiPk5pdmVsIGRlIFJpZXNnbzo8L2I+IHtsZXZlbH08YnI+PGI+RmVjaGE6PC9iPiB7ZGF0ZX0iCiAgICAgIH07CiAgICAgIHZhciBtdW5pY2lwaW9zID0gbmV3IEZlYXR1cmVMYXllcih7CiAgICAgICAgdXJsOiAiaHR0cHM6Ly9zZXJ2aWNlczcuYXJjZ2lzLmNvbS9BR09wbTBBT2tOVGNxeHFhL2FyY2dpcy9yZXN0L3NlcnZpY2VzL211bmljaXBpb3Nfc3VicmVnaW9uX2Nob2NvL0ZlYXR1cmVTZXJ2ZXIvMCIsCiAgICAgICAgcmVuZGVyZXI6IG11bmljaXBpb3NSZW5kZXJlciwKICAgICAgICBsYWJlbGluZ0luZm86IG11bmljaXBpb3NMYWJlbHMKICAgICAgfSk7CiAgICAgIG1hcC5hZGQobXVuaWNpcGlvcyk7CiAgICAgIHZhciBhbGVydGFzID0gbmV3IEZlYXR1cmVMYXllcih7CiAgICAgICAgdXJsOiAiaHR0cHM6Ly9zZXJ2aWNlczcuYXJjZ2lzLmNvbS9BR09wbTBBT2tOVGNxeHFhL2FyY2dpcy9yZXN0L3NlcnZpY2VzL2FsZXJ0YXNfc3VicmVnaW9uX2Nob2NvX2VqZW1wbG8vRmVhdHVyZVNlcnZlci8wIiwKICAgICAgICByZW5kZXJlcjogYWxlcnRSZW5kZXJlciwKICAgICAgICBvdXRGaWVsZHM6IFsidGhyZWF0IiwgImxvY2F0aW9uIiwgImxldmVsIiwgImRhdGUiLCAiT0JKRUNUSUQiXSwKICAgICAgICBwb3B1cFRlbXBsYXRlOiBhbGVydFBvcHVwCiAgICAgIH0pOwogICAgICBtYXAuYWRkKGFsZXJ0YXMpOwoKICAgICAgX3RoaXMudmlldy53aGVuTGF5ZXJWaWV3KGFsZXJ0YXMpLnRoZW4oZnVuY3Rpb24gKGxheWVyVmlldykgewogICAgICAgIGxheWVyVmlldy53YXRjaCgidXBkYXRpbmciLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgICAgIC8vIGF2YWlsYWJsZUZpZWxkcyB3aWxsIGJlY29tZSBhdmFpbGFibGUKICAgICAgICAgIC8vIG9uY2UgdGhlIGxheWVyIHZpZXcgZmluaXNoZXMgdXBkYXRpbmcKICAgICAgICAgIGlmICghdmFsdWUpIHsKICAgICAgICAgICAgbGF5ZXJWaWV3LnF1ZXJ5RmVhdHVyZXMoewogICAgICAgICAgICAgIG91dEZpZWxkczogbGF5ZXJWaWV3LmF2YWlsYWJsZUZpZWxkcywKICAgICAgICAgICAgICB3aGVyZTogIk9CSkVDVElEID4gMCIKICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzdWx0cykgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdHMuZmVhdHVyZS5sZW5ndGgpOyAvL3ZhciAgc29ydGVkRGVzY2VuZGluZyA9IHJlc3VsdHMuZmVhdHVyZXMuc29ydCgoYSwgYikgPT4gbmV3IERhdGUoYS5kYXRlKSAtIG5ldyBEYXRlKGIuZGF0ZSkpLnJldmVyc2UoKTsgCiAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJxdWVyeSBmYWlsZWQ6ICIsIGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMudmlldykgewogICAgICAvLyBkZXN0cm95IHRoZSBtYXAgdmlldwogICAgICB0aGlzLnZpZXcuY29udGFpbmVyID0gbnVsbDsKICAgIH0KICB9Cn07"},{"version":3,"sources":["WebMap.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div></div>\n</template>\n\n<script>\nimport { loadModules } from 'esri-loader';\n\nexport default {\n  name: 'web-map',\n  mounted() {\n    // lazy load the required ArcGIS API for JavaScript modules and CSS\n    loadModules(['esri/Map', 'esri/views/MapView', 'esri/layers/FeatureLayer'], { css: true })\n    .then(([ArcGISMap, MapView, FeatureLayer]) => {\n\n    const map = new ArcGISMap({\n    basemap: 'dark-gray-vector'\n    });\n\n    this.view = new MapView({\n    container: this.$el,\n    map: map,\n    center: [-76.781506677246, 5.9944065844109957], // longitude, latitude\n    zoom: 7\n    });\n\n    var municipiosRenderer = {\n        type: \"simple\",\n        symbol: {\n                type: \"picture-marker\",\n                url: \"https://image.flaticon.com/icons/png/512/1001/1001022.png\",\n                width: \"18px\",\n                height: \"18px\"\n        }\n    }\n\n    var municipiosLabels = {\n        symbol: {\n          type: \"text\",\n          color: \"#FFFFF\",\n          haloColor: \"#ff0000\",\n          haloSize: \"0px\",\n          font: {\n            size: \"12px\",\n            family: \"Noto Sans\",\n            style: \"italic\",\n            weight: \"normal\"\n          }\n        },\n        labelPlacement: \"below-center\",\n        labelExpressionInfo: {\n          expression: \"$feature.municipio\"\n        }\n    }\n\n    var alertRenderer = {\n        type: \"simple\",\n        symbol: {\n          type: \"picture-marker\",\n          url: \"https://image.flaticon.com/icons/svg/599/599506.svg\",\n          width: \"25px\",\n          height: \"25px\"\n        }\n    }\n    \n    var alertPopup = {\n        \"title\": \"{threat}\",\n        \"content\": \"<b>Ubicación:</b> {location}<br><b>Nivel de Riesgo:</b> {level}<br><b>Fecha:</b> {date}\"\n    }\n\n    var municipios = new FeatureLayer({\n        url: \"https://services7.arcgis.com/AGOpm0AOkNTcqxqa/arcgis/rest/services/municipios_subregion_choco/FeatureServer/0\",\n        renderer: municipiosRenderer,\n        labelingInfo: municipiosLabels\n    });\n\n      map.add(municipios);  \n\n    var alertas= new FeatureLayer({\n        url: \"https://services7.arcgis.com/AGOpm0AOkNTcqxqa/arcgis/rest/services/alertas_subregion_choco_ejemplo/FeatureServer/0\",\n        renderer: alertRenderer,\n        outFields: [\"threat\", \"location\", \"level\", \"date\", \"OBJECTID\"],\n        popupTemplate: alertPopup\n      });\n\n    map.add(alertas);   \n\n    this.view.whenLayerView(alertas).then(function(layerView){\n        layerView.watch(\"updating\", function(value){\n            // availableFields will become available\n            // once the layer view finishes updating\n            if (!value) {\n            layerView.queryFeatures({\n                outFields: layerView.availableFields,\n                where: \"OBJECTID > 0\"\n            })\n            .then(function(results) {\n                console.log(results.feature.length)\n                //var  sortedDescending = results.features.sort((a, b) => new Date(a.date) - new Date(b.date)).reverse(); \n            })\n            .catch(function(error) {\n                console.log(\"query failed: \", error);\n            });\n            }\n        });\n        });\n    \n    });\n  },\n  beforeDestroy() {\n    if (this.view) {\n      // destroy the map view\n      this.view.container = null;\n    }\n  }\n};\n\n</script>\n\n<style scoped>\ndiv {\n  padding: 0;\n  margin: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>"],"sourceRoot":"src/components"}]}